{% load humanize %}
<div class="video-card">
   <a href="{% url 'videos:watch' video.id %}" class="video-link">

        
        <!-- Thumbnail Section -->
        <div class="thumbnail">
            {% if video.thumbnail %}
                <img src="{{ video.thumbnail.url }}" alt="Thumbnail for {{ video.title }}">
            {% else %}
                <div class="no-thumbnail" aria-label="No thumbnail available">
                    <svg width="70" height="70" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M23 7l-7 5 7 5V7z"></path>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                    </svg>
                </div>
            {% endif %}
            
            <div class="duration">
                {{ video.duration|default:"--:--" }}
            </div>
        </div>

        <!-- Info Section -->
        <div class="video-info">
            <h3 class="video-title" title="{{ video.title }}">{{ video.title }}</h3>

            <div class="video-meta">
                <a href="{% url 'subscriptions:channel' video.uploader.id %}"
                   class="channel-name"
                   onclick="event.stopPropagation();"
                   title="Visit {{ video.uploader.username }}'s channel">
                    {{ video.uploader.username }}
                </a>

                <div class="video-stats">
                    <span>{{ video.views_count|intcomma }} view{{ video.views_count|pluralize }}</span>
                    <span>‚Ä¢</span>
                    <span>{{ video.uploaded_at|timesince }} ago</span>
                </div>

                <div class="video-engagement">
                    <span>üëç {{ video.get_likes_count }}</span>
                    <span>üí¨ {{ video.get_comments_count }}</span>
                </div>
            </div>
        </div>

    </a>
</div>

<style>
    .video-card {
        background: #fff;
        border-radius: 10px;
        overflow: hidden;
        cursor: pointer;
        transition: transform 0.25s, box-shadow 0.25s;
        border: 1px solid #eee;
    }
    .video-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 6px 14px rgba(0,0,0,0.12);
    }

    .video-link {
        color: inherit;
        text-decoration: none;
        display: block;
    }

    .thumbnail {
        position: relative;
        width: 100%;
        padding-top: 56.25%;
        background: #000;
        overflow: hidden;
    }
    .thumbnail img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .no-thumbnail {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #4f46e5, #9333ea);
        color: white;
    }

    .duration {
        position: absolute;
        bottom: 8px;
        right: 8px;
        background: rgba(0,0,0,0.75);
        color: #fff;
        padding: 2px 6px;
        font-size: 12px;
        border-radius: 3px;
        font-weight: 600;
    }

    .video-info {
        padding: 12px 14px;
    }

    .video-title {
        font-size: 14.5px;
        font-weight: 600;
        color: #111;
        margin-bottom: 8px;
        line-height: 1.4;
        max-height: 42px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .video-meta {
        font-size: 12px;
        color: #555;
    }

    .channel-name {
        display: block;
        color: #555;
        margin-bottom: 4px;
        font-weight: 500;
    }
    .channel-name:hover {
        color: #111;
    }

    .video-stats {
        display: flex;
        align-items: center;
        gap: 6px;
        margin-bottom: 6px;
    }

    .video-engagement {
        display: flex;
        gap: 16px;
        padding-top: 8px;
        border-top: 1px solid #f3f3f3;
        margin-top: 8px;
    }
    .video-engagement span {
        font-size: 11px;
        color: #444;
    }
</style>
