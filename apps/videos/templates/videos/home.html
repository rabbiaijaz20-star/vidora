{% extends "base.html" %}
{% load static %}

{% block title %}Home â€” Videos{% endblock %}

{% block content %}
<header style="display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:18px;">
  <form method="get" style="flex:1; display:flex; gap:8px;">
    <input type="text" name="q" placeholder="Search videos..." value="{{ query|default:'' }}" style="flex:1; padding:8px; border-radius:4px; border:1px solid #ccc;">
    <button type="submit" style="padding:8px 12px; border-radius:4px; border:none; background:#065fd4; color:white;">Search</button>
  </form>

  <div style="display:flex; gap:8px; align-items:center;">
    {% if user.is_authenticated %}
      <a href="{% url 'videos:upload' %}" style="padding:8px 12px; background:#ff0000; color:#fff; text-decoration:none; border-radius:4px;">Upload</a>
      <a href="{% url 'user_profile:profile' %}" style="text-decoration:none;">Profile</a>
    {% else %}
      <a href="{% url 'login' %}">Login</a>
      <a href="{% url 'users:signup' %}">Signup</a>
    {% endif %}
    <a href="{% url 'subscriptions:subscription_plans' %}">Plans</a>
  </div>
</header>

<main>
  <h2>Recommended</h2>
  <div style="display:flex; flex-wrap:wrap; gap:16px;">
    {% if page_obj and page_obj.object_list %}
      {% for video in page_obj.object_list %}
        {% include 'videos/video_card.html' with video=video %}
      {% endfor %}
    {% else %}
      <p>No videos found.</p>
    {% endif %}
  </div>

  {% if page_obj.has_other_pages %}
    <nav style="margin-top:20px;">
      {% if page_obj.has_previous %}
        <a href="?{% if query %}q={{ query }}&{% endif %}page={{ page_obj.previous_page_number }}">Previous</a>
      {% endif %}
      <span> Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }} </span>
      {% if page_obj.has_next %}
        <a href="?{% if query %}q={{ query }}&{% endif %}page={{ page_obj.next_page_number }}">Next</a>
      {% endif %}
    </nav>
  {% endif %}
</main>
{% endblock %}
